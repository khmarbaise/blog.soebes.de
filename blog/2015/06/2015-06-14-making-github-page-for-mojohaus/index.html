<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Manual Site Deployment to GitHub Unfortunately the Mojo Codehaus organization has closed their doors. In consequence all projects had to move to a new home. The Mojo Codehaus Maven plugins had to move as well so after the transition of the code etc. onto Github and the newly created The MojoHaus organization we need to get all the sites back online which contains the documentation of the plugins.
During the transition the Subversion repositories have been migrated to Git repositories.'>
<meta name='theme-color' content='#6699cc'>

<meta property='og:title' content='Making GitHub Page for MojoHaus Plugins • Karl Heinz Marbaise'>
<meta property='og:description' content='Manual Site Deployment to GitHub Unfortunately the Mojo Codehaus organization has closed their doors. In consequence all projects had to move to a new home. The Mojo Codehaus Maven plugins had to move as well so after the transition of the code etc. onto Github and the newly created The MojoHaus organization we need to get all the sites back online which contains the documentation of the plugins.
During the transition the Subversion repositories have been migrated to Git repositories.'>
<meta property='og:url' content='http://localhost:1313/blog/2015/06/2015-06-14-making-github-page-for-mojohaus/'>
<meta property='og:site_name' content='A coders, hackers heaven.....Hm...I do not think so...'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/d9cd3f93adbfb7d88eb68f903aa22a51?s=256'><meta property='article:section' content='Blog'><meta property='article:published_time' content='2015-06-12T08:09:00Z'/><meta property='article:modified_time' content='2015-06-12T08:09:00Z'/><meta name='twitter:card' content='summary'><meta name='twitter:creator' content='@khmarbaise'>

<meta name="generator" content="Hugo 0.40.3" />

  <title>Making GitHub Page for MojoHaus Plugins • Karl Heinz Marbaise</title>
  <link rel='canonical' href='http://localhost:1313/blog/2015/06/2015-06-14-making-github-page-for-mojohaus/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.67e9c12b.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#6699cc;}
</style>

</head>


<body class='page type-blog layout-post has-sidebar'>

  <div class='site'>

    <div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div>
      <img class="soebeslogo" src='/images/weblogo.gif'>
    </div>
    
    <h2 class='title site-title '>
     
    </h2>
    <div class='desc'>
    
    </div>
  </header>

</section>
</div>

  <div class='sidebar-overlay'></div>
</div>

    <div class='main'>

      <nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>
    <ul><li class='item'>
        <a href='/impressum/'>Impressum</a>
      </li><li class='item'>
        <a href='/categories/'>Categories</a>
      </li><li class='item'>
        <a href='/categories/'>Maven</a>
      </li><li class='item'>
        <a href='/categories/maven-best-practice/'>Maven Best Practices</a>
      </li></ul>
  </div>
</nav>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>A coders, hackers heaven.....Hm...I do not think so...</p><p class='desc site-desc'></p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Making GitHub Page for MojoHaus Plugins</h1>
      

    </div>
    
<div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2015-06-12T08:09:00Z'>2015, Jun 12</time>
</span>

  <span class='byline'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"/>
  <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"/>
  
</svg>
<span class='screen-reader-text'> by </span><a href='/authors/khmarbaise'>Karl Heinz Marbaise</a></span>
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
4 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  

<h2 id="manual-site-deployment-to-github">Manual Site Deployment to GitHub</h2>

<p>Unfortunately the Mojo Codehaus organization has closed their doors. In
consequence all projects had to move to a new home. The Mojo Codehaus Maven
plugins had to move as well so after the transition of the code etc. onto
<a href="https://github.com" target="_blank">Github</a> and the newly created <a href="https://github.com/mojohaus/" target="_blank">The MojoHaus</a> organization we
need to get all the sites back online which contains the documentation of the
plugins.</p>

<p>During the transition the Subversion repositories have been migrated
to <a href="http://www.mojohaus.org/" target="_blank">Git repositories</a>.</p>

<p>So now the questions how to get back the old documentation and which approach
should be followed to make further deployment of the site to GitHub pages as
simple as possible.</p>

<!-- more -->

<p>The original approach to deploy maven sites was to use a WebDAV access to the
Codehaus infrastructure which unfortunately was a little bit slow. So now we
are on Github and can improve those things.</p>

<p>But the first thing is to get back the documentation sites of all the migrated
plugins so the users have a chance to read the documentation.</p>

<p>So the following things have to be done:</p>

<ol>
<li>How to regenerate all the plugin sites of the migrated plugins?</li>
<li>How to make site deployment as simple as possible for plugin maintainers?</li>
</ol>

<p>Unfortunately the first step has to be made manually. So first we need to make a
clone of the plugin we want to regenerate the site.</p>

<pre><code>$ git clone https://github.com/mojohaus/castor-maven-plugin.git
Cloning into 'castor-maven-plugin'...
remote: Counting objects: 1280, done.
remote: Compressing objects: 100% (5/5), done.
remote: Total 1280 (delta 1), reused 0 (delta 0), pack-reused 1274
Receiving objects: 100% (1280/1280), 278.78 KiB | 0 bytes/s, done.
Resolving deltas: 100% (474/474), done.
Checking connectivity... done.
</code></pre>

<p>You can look which releases have been created:</p>

<pre><code>$ git tag
castor-maven-plugin-1.0
castor-maven-plugin-1.5
castor-maven-plugin-2.0
castor-maven-plugin-2.0-alpha1
castor-maven-plugin-2.1
castor-maven-plugin-2.5
</code></pre>

<p>So to get the latest version of the documentation online we have to checkout
the state of the latest release which is in this case <code>castor-maven-plugin-2.5</code>.</p>

<pre><code>$ git checkout castor-maven-plugin-2.5
..
</code></pre>

<p>So next is to generate the site documentation by the appropriate call.</p>

<pre><code>$ mvn site
</code></pre>

<p>This will result in the appropriate documentation in <code>target/site</code>. So now it is
best to create the appropriate <code>gh-pages</code> branch for taking the content of the site.</p>

<pre><code>$ git checkout --orphan gh-pages
</code></pre>

<p>Afterwards you have to clean up the folders and remove everything except the
<code>target</code> folder and copy the content of the generated site. But do not forget
to add a <code>.gitignore</code> file to prevent adding the <code>target</code> folder.</p>

<pre><code>$ rm -fr src pom.xml pom*.xml LICENSE*
$ cp -r target/site/. .
$ git add .
</code></pre>

<p>and finally you have to commit and push the site to GitHub.</p>

<pre><code>$ git commit -a -m&quot;Site regenerated after transition&quot;
$ git push -u origin gh-pages
</code></pre>

<p>After a few seconds the content should be available and for MojoHaus you can access now
the <a href="http://www.mojohaus.org/castor-maven-plugin/" target="_blank">documentation for the plugin</a>.</p>

<h2 id="automatic-site-deployment-to-github">Automatic Site Deployment to GitHub</h2>

<p>So let us take a look onto the second step and see how to improve the site deployment
for further development at <a href="http://www.mojohaus.org/" target="_blank">MojoHaus</a>
The first thing you need to do is to add an approriate <code>distributionManagement</code> like
the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;distributionManagement&gt;</span>
  <span style="color:#f92672">&lt;site&gt;</span>
    <span style="color:#f92672">&lt;id&gt;</span>github<span style="color:#f92672">&lt;/id&gt;</span>
    <span style="color:#f92672">&lt;url&gt;</span>scm:git:git@github.com:mojohaus/castor-maven-plugin.git<span style="color:#f92672">&lt;/url&gt;</span>
  <span style="color:#f92672">&lt;/site&gt;</span>
<span style="color:#f92672">&lt;/distributionManagement&gt;</span></code></pre></div>
<p>Apart from the above you have to use the <a href="https://maven.apache.org/plugins/maven-site-plugin/" target="_blank">maven-site-plugin in version
3.4</a> Furthermore you have to add the following supplemental
configuration for maven-site-plugin:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;pluginManagement&gt;</span>
  <span style="color:#f92672">&lt;plugins&gt;</span>
    <span style="color:#f92672">&lt;plugin&gt;</span>
      <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#f92672">&lt;/groupId&gt;</span>
      <span style="color:#f92672">&lt;artifactId&gt;</span>maven-site-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span>
      <span style="color:#f92672">&lt;configuration&gt;</span>
        <span style="color:#f92672">&lt;topSiteURL&gt;</span>${project.distributionManagement.site.url}<span style="color:#f92672">&lt;/topSiteURL&gt;</span>
      <span style="color:#f92672">&lt;/configuration&gt;</span>
    <span style="color:#f92672">&lt;/plugin&gt;</span>
  <span style="color:#f92672">&lt;/plugins&gt;</span>
<span style="color:#f92672">&lt;/pluginManagement&gt;</span></code></pre></div>
<p>This is needed to calculate the correct root location if you do <code>mvn site:stage</code>. A symptom
of missing the above configuration is having a folder <code>target/castor-maven-plugin.git</code> folder
which contains the generated site instead of <code>target/staging</code>.</p>

<p>So now we would like to transfer the site content to GitHub via the <a href="https://maven.apache.org/plugins/maven-scm-publish-plugin/" target="_blank">maven-scm-publish-plugin</a>.
Getting this to we need to add the configuration for <a href="https://maven.apache.org/plugins/maven-scm-publish-plugin/" target="_blank">maven-scm-publish-plugin</a> like the following.
In this case we define <code>scmBranch</code> to point to <code>gh-pages</code> which is the default branch where GitHub
serves content from. This might be changed if you are on the organization level where the <code>master</code>
branch is used for that.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#f92672">&lt;build&gt;</span>
  <span style="color:#f92672">&lt;pluginManagement&gt;</span>
    <span style="color:#f92672">&lt;plugins&gt;</span>
      <span style="color:#f92672">&lt;plugin&gt;</span>
        <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#f92672">&lt;/groupId&gt;</span>
        <span style="color:#f92672">&lt;artifactId&gt;</span>maven-scm-publish-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span>
        <span style="color:#f92672">&lt;version&gt;</span>1.1<span style="color:#f92672">&lt;/version&gt;</span>
        <span style="color:#f92672">&lt;configuration&gt;</span>
          <span style="color:#f92672">&lt;scmBranch&gt;</span>gh-pages<span style="color:#f92672">&lt;/scmBranch&gt;</span>
        <span style="color:#f92672">&lt;/configuration&gt;</span>
      <span style="color:#f92672">&lt;/plugin&gt;</span>
    <span style="color:#f92672">&lt;/plugins&gt;</span>
  <span style="color:#f92672">&lt;/pluginManagement&gt;</span>
<span style="color:#f92672">&lt;/build&gt;</span></code></pre></div>
<p>So now it is easy to deploy the site to GitHub simply by using the following:</p>

<pre><code>$ mvn clean site site:stage scm-publish:publish-scm
</code></pre>

<p>If you have a multi-module project you have to separate the steps a little bit like this:</p>

<pre><code>$ mvn clean site site:stage 
$ mvn scm-publish:publish-scm
</code></pre>

<p>To simplify your work you could add a little script which contains the above two steps and
finally you can call the script.</p>

<p>Ah not to miss things here. The configuration of the distributionManagement must be done in every single plugin
but the configuration for maven-site-plugin and maven-publish-scm-plugin could be moved into a parent
pom (like mojo parent) to simplify configuration of plugins.</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  <div class='categories'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Categories: </span><a class='category' href='/categories/mojohaus'>MojoHaus</a>, <a class='category' href='/categories/github'>Github</a>, <a class='category' href='/categories/bm'>Bm</a>, <a class='category' href='/categories/maven'>Maven</a>, <a class='category' href='/categories/maven-plugins'>Maven-plugins</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog/2015/06/2015-06-12-apache-maven-shade-plugin-version-2-dot-4-released/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Apache Maven Shade Plugin Version 2.4 Released</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog/2015/06/2015-06-16-android-maven-plugin-version-4-dot-3-0-released/'>
        <span class='screen-reader-text'>Next post: </span>Android Maven Plugin Version 4.3.0 Released<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'>
          <section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/khmarbaise' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/khmarbaise' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:info@soebes.de' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li><li>
        <a href='https://gitlab.com/khmarbaise' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Gitlab account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22.65 14.39L12 22.13 1.35 14.39a.84.84 0 0 1-.3-.94l1.22-3.78 2.44-7.51A.42.42 0 0 1 4.82 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.49h8.1l2.44-7.51A.42.42 0 0 1 18.6 2a.43.43 0 0 1 .58 0 .42.42 0 0 1 .11.18l2.44 7.51L23 13.45a.84.84 0 0 1-.35.94z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://linkedin.com/in/karl-heinz-marbaise-17a15614' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Linkedin account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/>
  <rect x="2" y="9" width="4" height="12"/>
  <circle cx="4" cy="4" r="2"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section>
          <div class='copyright'>
  <p>SoEBeS &copy; 2004-2019 SoftwareEntwicklung Beratung Schulung </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/assets\/js\/'</script>

<script src='/assets/js/main.0d92f56c.js'></script>
<script data-no-instant>document.write('<script src="/livereload.js?port=1313&mindelay=10"></' + 'script>')</script></body>

</html>

